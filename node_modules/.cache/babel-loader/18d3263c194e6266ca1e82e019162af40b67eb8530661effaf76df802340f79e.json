{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst STORAGE_KEYS = {\n  CART: \"cart_v3\"\n};\nexport default function useCart(showToast) {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [vehicleName, setVehicleName] = useState(\"\");\n  const [vehicleNumber, setVehicleNumber] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n  useEffect(() => {\n    const stored = JSON.parse(localStorage.getItem(STORAGE_KEYS.CART) || \"[]\");\n    setCart(stored);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEYS.CART, JSON.stringify(cart));\n  }, [cart]);\n  const handleAdd = item => {\n    const existing = cart.find(c => c.name === item.name);\n    if (!existing) {\n      var _item$batches;\n      const newItem = {\n        name: item.name,\n        entries: (_item$batches = item.batches) !== null && _item$batches !== void 0 && _item$batches.length ? item.batches.map(b => ({\n          batch: b.batch || \"\",\n          mfg: b.mfg || \"\",\n          exp: b.exp || \"\",\n          qty: 0,\n          ctn: 0\n        })) : [{\n          batch: \"\",\n          mfg: \"\",\n          exp: \"\",\n          qty: 0,\n          ctn: 0\n        }]\n      };\n      setCart(prev => [...prev, newItem]);\n    } else {\n      showToast(\"âš ï¸ Item already added â€” use +Batch to add more\");\n    }\n  };\n  const handleRemove = (itemIndex, batchIndex = null) => {\n    const newCart = [...cart];\n    if (batchIndex === null) {\n      newCart.splice(itemIndex, 1);\n    } else {\n      newCart[itemIndex].entries.splice(batchIndex, 1);\n      if (newCart[itemIndex].entries.length === 0) {\n        newCart.splice(itemIndex, 1);\n      }\n    }\n    setCart(newCart);\n    showToast(\"âŒ Removed\");\n  };\n  const handleBatchChange = (itemIndex, batchIndex, field, value) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries[batchIndex][field] = [\"qty\", \"ctn\"].includes(field) ? parseInt(value) || 0 : value;\n    setCart(newCart);\n  };\n  const handleAddBatch = itemIndex => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries.push({\n      batch: \"\",\n      mfg: \"\",\n      exp: \"\",\n      qty: 0,\n      ctn: 0\n    });\n    setCart(newCart);\n  };\n  const handleSubmit = () => {\n    const valid = cart.every(item => item.entries.every(e => e.batch && (e.qty > 0 || e.ctn > 0)));\n    if (!valid) {\n      showToast(\"âš ï¸ Please fill batch, qty or CTN for all entries\");\n      return;\n    }\n    console.log(\"ðŸ›’ Final Order:\", cart);\n    console.log(\"ðŸšš Vehicle Name:\", vehicleName);\n    console.log(\"ðŸ”¢ Vehicle Number:\", vehicleNumber);\n    console.log(\"ðŸ“ Notes:\", notes);\n    showToast(\"âœ… Order submitted (local only)\");\n  };\n  const resetCart = () => {\n    localStorage.removeItem(STORAGE_KEYS.CART);\n    setCart([]);\n    setVehicleName(\"\");\n    setVehicleNumber(\"\");\n    setNotes(\"\");\n  };\n  const totalCTN = cart.reduce((sum, item) => sum + item.entries.reduce((eSum, e) => eSum + (e.ctn || 0), 0), 0);\n  return {\n    cart,\n    handleAdd,\n    handleRemove,\n    handleBatchChange,\n    handleAddBatch,\n    handleSubmit,\n    resetCart,\n    totalCTN,\n    vehicleName,\n    setVehicleName,\n    vehicleNumber,\n    setVehicleNumber,\n    notes,\n    setNotes\n  };\n}\n_s(useCart, \"1h6kiNfVtxgw4J9U6aGmtcauAUA=\");","map":{"version":3,"names":["useState","useEffect","STORAGE_KEYS","CART","useCart","showToast","_s","cart","setCart","vehicleName","setVehicleName","vehicleNumber","setVehicleNumber","notes","setNotes","stored","JSON","parse","localStorage","getItem","setItem","stringify","handleAdd","item","existing","find","c","name","_item$batches","newItem","entries","batches","length","map","b","batch","mfg","exp","qty","ctn","prev","handleRemove","itemIndex","batchIndex","newCart","splice","handleBatchChange","field","value","includes","parseInt","handleAddBatch","push","handleSubmit","valid","every","e","console","log","resetCart","removeItem","totalCTN","reduce","sum","eSum"],"sources":["C:/Users/Jai Ayurved research/Documents/Projects/Projuect Supervisor/src/hooks/useCartLogic.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst STORAGE_KEYS = {\n  CART: \"cart_v3\"\n};\n\nexport default function useCart(showToast) {\n  const [cart, setCart] = useState([]);\n  const [vehicleName, setVehicleName] = useState(\"\");\n  const [vehicleNumber, setVehicleNumber] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  useEffect(() => {\n    const stored = JSON.parse(localStorage.getItem(STORAGE_KEYS.CART) || \"[]\");\n    setCart(stored);\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEYS.CART, JSON.stringify(cart));\n  }, [cart]);\n\nconst handleAdd = (item) => {\n  const existing = cart.find(c => c.name === item.name);\n  if (!existing) {\n    const newItem = {\n      name: item.name,\n      entries: item.batches?.length\n        ? item.batches.map(b => ({\n            batch: b.batch || \"\",\n            mfg: b.mfg || \"\",\n            exp: b.exp || \"\",\n            qty: 0,\n            ctn: 0\n          }))\n        : [{ batch: \"\", mfg: \"\", exp: \"\", qty: 0, ctn: 0 }]\n    };\n    setCart(prev => [...prev, newItem]);\n  } else {\n    showToast(\"âš ï¸ Item already added â€” use +Batch to add more\");\n  }\n};\n\n  const handleRemove = (itemIndex, batchIndex = null) => {\n    const newCart = [...cart];\n    if (batchIndex === null) {\n      newCart.splice(itemIndex, 1);\n    } else {\n      newCart[itemIndex].entries.splice(batchIndex, 1);\n      if (newCart[itemIndex].entries.length === 0) {\n        newCart.splice(itemIndex, 1);\n      }\n    }\n    setCart(newCart);\n    showToast(\"âŒ Removed\");\n  };\n\n  const handleBatchChange = (itemIndex, batchIndex, field, value) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries[batchIndex][field] =\n      [\"qty\", \"ctn\"].includes(field) ? parseInt(value) || 0 : value;\n    setCart(newCart);\n  };\n\n  const handleAddBatch = (itemIndex) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries.push({ batch: \"\", mfg: \"\", exp: \"\", qty: 0, ctn: 0 });\n    setCart(newCart);\n  };\n\n  const handleSubmit = () => {\n    const valid = cart.every(item =>\n      item.entries.every(e => e.batch && (e.qty > 0 || e.ctn > 0))\n    );\n    if (!valid) {\n      showToast(\"âš ï¸ Please fill batch, qty or CTN for all entries\");\n      return;\n    }\n    console.log(\"ðŸ›’ Final Order:\", cart);\n    console.log(\"ðŸšš Vehicle Name:\", vehicleName);\n    console.log(\"ðŸ”¢ Vehicle Number:\", vehicleNumber);\n    console.log(\"ðŸ“ Notes:\", notes);\n    showToast(\"âœ… Order submitted (local only)\");\n  };\n\n  const resetCart = () => {\n    localStorage.removeItem(STORAGE_KEYS.CART);\n    setCart([]);\n    setVehicleName(\"\");\n    setVehicleNumber(\"\");\n    setNotes(\"\");\n  };\n\n  const totalCTN = cart.reduce(\n    (sum, item) =>\n      sum + item.entries.reduce((eSum, e) => eSum + (e.ctn || 0), 0),\n    0\n  );\n\n  return {\n    cart,\n    handleAdd,\n    handleRemove,\n    handleBatchChange,\n    handleAddBatch,\n    handleSubmit,\n    resetCart,\n    totalCTN,\n    vehicleName,\n    setVehicleName,\n    vehicleNumber,\n    setVehicleNumber,\n    notes,\n    setNotes\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}