{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nexport default function useProductFilter() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [search, setSearch] = useState(\"\");\n  const [selectedCategory, setSelectedCategory] = useState(\"पाक\");\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const res = await fetch(\"https://script.google.com/macros/s/AKfycbyuBBpR3LjZftoWLmuJlABy4vex0CRSCweCq3MS8vh9klL7uTy1C3UO2Yfvx0eX6JE/exec?key=DPRTMNT54$\");\n        const data = await res.json();\n        console.log(\"✅ Data fetched:\", data);\n        const grouped = {};\n        data.forEach(row => {\n          if (!row.name) return;\n          const key = row.name.trim();\n          if (!grouped[key]) {\n            grouped[key] = {\n              name: key,\n              category: row.Category || \"Uncategorized\",\n              batches: []\n            };\n          }\n          grouped[key].batches.push({\n            batch: row.Batch || \"\",\n            mfg: toMMYYYY(row.mfgDate),\n            exp: toMMYYYY(row.expDate)\n          });\n        });\n        setProducts(Object.values(grouped));\n      } catch (error) {\n        console.error(\"❌ Fetch error:\", error);\n      }\n    };\n    fetchData();\n  }, []);\n  const filteredProducts = products.filter(p => {\n    if (search.trim()) {\n      return p.name.toLowerCase().includes(search.toLowerCase());\n    }\n    return p.category === selectedCategory;\n  });\n  return {\n    products,\n    filteredProducts,\n    search,\n    setSearch,\n    selectedCategory,\n    setSelectedCategory\n  };\n}\n_s(useProductFilter, \"Hh7lHTlSUmto4adFRCdyCwfVzZE=\");\nfunction toMMYYYY(dateStr) {\n  if (!dateStr) return \"\";\n  const parts = dateStr.split(\"-\");\n  if (parts.length === 3) {\n    return `${parts[1]}-${parts[2]}`; // MM-YYYY from D-MMM-YYYY\n  }\n  return dateStr;\n}","map":{"version":3,"names":["useState","useEffect","useProductFilter","_s","products","setProducts","search","setSearch","selectedCategory","setSelectedCategory","fetchData","res","fetch","data","json","console","log","grouped","forEach","row","name","key","trim","category","Category","batches","push","batch","Batch","mfg","toMMYYYY","mfgDate","exp","expDate","Object","values","error","filteredProducts","filter","p","toLowerCase","includes","dateStr","parts","split","length"],"sources":["C:/Users/Jai Ayurved research/Documents/Projects/Projuect Supervisor/src/hooks/useProductFilter.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nexport default function useProductFilter() {\r\n  const [products, setProducts] = useState([]);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [selectedCategory, setSelectedCategory] = useState(\"पाक\");\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const res = await fetch(\"https://script.google.com/macros/s/AKfycbyuBBpR3LjZftoWLmuJlABy4vex0CRSCweCq3MS8vh9klL7uTy1C3UO2Yfvx0eX6JE/exec?key=DPRTMNT54$\")\r\nconst data = await res.json();\r\n        console.log(\"✅ Data fetched:\", data);\r\n\r\n        const grouped = {};\r\n\r\n        data.forEach(row => {\r\n          if (!row.name) return;\r\n\r\n          const key = row.name.trim();\r\n\r\n          if (!grouped[key]) {\r\n            grouped[key] = {\r\n              name: key,\r\n              category: row.Category || \"Uncategorized\",\r\n              batches: []\r\n            };\r\n          }\r\n\r\n          grouped[key].batches.push({\r\n            batch: row.Batch || \"\",\r\n            mfg: toMMYYYY(row.mfgDate),\r\n            exp: toMMYYYY(row.expDate)\r\n          });\r\n        });\r\n\r\n        setProducts(Object.values(grouped));\r\n      } catch (error) {\r\n        console.error(\"❌ Fetch error:\", error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  const filteredProducts = products.filter((p) => {\r\n    if (search.trim()) {\r\n      return p.name.toLowerCase().includes(search.toLowerCase());\r\n    }\r\n    return p.category === selectedCategory;\r\n  });\r\n\r\n  return {\r\n    products,\r\n    filteredProducts,\r\n    search,\r\n    setSearch,\r\n    selectedCategory,\r\n    setSelectedCategory\r\n  };\r\n}\r\n\r\nfunction toMMYYYY(dateStr) {\r\n  if (!dateStr) return \"\";\r\n  const parts = dateStr.split(\"-\");\r\n  if (parts.length === 3) {\r\n    return `${parts[1]}-${parts[2]}`; // MM-YYYY from D-MMM-YYYY\r\n  }\r\n  return dateStr;\r\n}\r\n"],"mappings":";AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAE3C,eAAe,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EACzC,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGL,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACM,MAAM,EAAEC,SAAS,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACQ,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAE/DC,SAAS,CAAC,MAAM;IACd,MAAMS,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,gIAAgI,CAAC;QACjK,MAAMC,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;QACrBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,IAAI,CAAC;QAEpC,MAAMI,OAAO,GAAG,CAAC,CAAC;QAElBJ,IAAI,CAACK,OAAO,CAACC,GAAG,IAAI;UAClB,IAAI,CAACA,GAAG,CAACC,IAAI,EAAE;UAEf,MAAMC,GAAG,GAAGF,GAAG,CAACC,IAAI,CAACE,IAAI,CAAC,CAAC;UAE3B,IAAI,CAACL,OAAO,CAACI,GAAG,CAAC,EAAE;YACjBJ,OAAO,CAACI,GAAG,CAAC,GAAG;cACbD,IAAI,EAAEC,GAAG;cACTE,QAAQ,EAAEJ,GAAG,CAACK,QAAQ,IAAI,eAAe;cACzCC,OAAO,EAAE;YACX,CAAC;UACH;UAEAR,OAAO,CAACI,GAAG,CAAC,CAACI,OAAO,CAACC,IAAI,CAAC;YACxBC,KAAK,EAAER,GAAG,CAACS,KAAK,IAAI,EAAE;YACtBC,GAAG,EAAEC,QAAQ,CAACX,GAAG,CAACY,OAAO,CAAC;YAC1BC,GAAG,EAAEF,QAAQ,CAACX,GAAG,CAACc,OAAO;UAC3B,CAAC,CAAC;QACJ,CAAC,CAAC;QAEF5B,WAAW,CAAC6B,MAAM,CAACC,MAAM,CAAClB,OAAO,CAAC,CAAC;MACrC,CAAC,CAAC,OAAOmB,KAAK,EAAE;QACdrB,OAAO,CAACqB,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAAC;MACxC;IACF,CAAC;IAED1B,SAAS,CAAC,CAAC;EACb,CAAC,EAAE,EAAE,CAAC;EAEN,MAAM2B,gBAAgB,GAAGjC,QAAQ,CAACkC,MAAM,CAAEC,CAAC,IAAK;IAC9C,IAAIjC,MAAM,CAACgB,IAAI,CAAC,CAAC,EAAE;MACjB,OAAOiB,CAAC,CAACnB,IAAI,CAACoB,WAAW,CAAC,CAAC,CAACC,QAAQ,CAACnC,MAAM,CAACkC,WAAW,CAAC,CAAC,CAAC;IAC5D;IACA,OAAOD,CAAC,CAAChB,QAAQ,KAAKf,gBAAgB;EACxC,CAAC,CAAC;EAEF,OAAO;IACLJ,QAAQ;IACRiC,gBAAgB;IAChB/B,MAAM;IACNC,SAAS;IACTC,gBAAgB;IAChBC;EACF,CAAC;AACH;AAACN,EAAA,CA1DuBD,gBAAgB;AA4DxC,SAAS4B,QAAQA,CAACY,OAAO,EAAE;EACzB,IAAI,CAACA,OAAO,EAAE,OAAO,EAAE;EACvB,MAAMC,KAAK,GAAGD,OAAO,CAACE,KAAK,CAAC,GAAG,CAAC;EAChC,IAAID,KAAK,CAACE,MAAM,KAAK,CAAC,EAAE;IACtB,OAAO,GAAGF,KAAK,CAAC,CAAC,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;EACpC;EACA,OAAOD,OAAO;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}