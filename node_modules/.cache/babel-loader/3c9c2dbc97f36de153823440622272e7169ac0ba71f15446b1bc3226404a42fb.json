{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nconst STORAGE_KEYS = {\n  CART: \"cart_v3\"\n};\nexport default function useCart(showToast) {\n  _s();\n  const [cart, setCart] = useState([]);\n  const [vehicleName, setVehicleName] = useState(\"\");\n  const [vehicleNumber, setVehicleNumber] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n  useEffect(() => {\n    const stored = JSON.parse(localStorage.getItem(STORAGE_KEYS.CART) || \"[]\");\n    setCart(stored);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEYS.CART, JSON.stringify(cart));\n  }, [cart]);\n  const handleAdd = item => {\n    const existing = cart.find(c => c.name === item.name);\n    if (!existing) {\n      const newItem = {\n        name: item.name,\n        entries: [{\n          batch: \"\",\n          mfg: \"\",\n          exp: \"\",\n          qty: 0,\n          ctn: 0\n        }]\n      };\n      setCart(prev => [...prev, newItem]);\n    } else {\n      showToast(\"âš ï¸ Item already added â€” use +Batch to add more\");\n    }\n  };\n  const handleRemove = (itemIndex, batchIndex = null) => {\n    const newCart = [...cart];\n    if (batchIndex === null) {\n      newCart.splice(itemIndex, 1);\n    } else {\n      newCart[itemIndex].entries.splice(batchIndex, 1);\n      if (newCart[itemIndex].entries.length === 0) {\n        newCart.splice(itemIndex, 1);\n      }\n    }\n    setCart(newCart);\n    showToast(\"âŒ Removed\");\n  };\n  const handleBatchChange = (itemIndex, batchIndex, field, value) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries[batchIndex][field] = [\"qty\", \"ctn\"].includes(field) ? parseInt(value) || 0 : value;\n    setCart(newCart);\n  };\n  const handleAddBatch = itemIndex => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries.push({\n      batch: \"\",\n      mfg: \"\",\n      exp: \"\",\n      qty: 0,\n      ctn: 0\n    });\n    setCart(newCart);\n  };\n  const handleSubmit = () => {\n    const valid = cart.every(item => item.entries.every(e => e.batch && (e.qty > 0 || e.ctn > 0)));\n    if (!valid) {\n      showToast(\"âš ï¸ Please fill batch, qty or CTN for all entries\");\n      return;\n    }\n    console.log(\"ðŸ›’ Final Order:\", cart);\n    console.log(\"ðŸšš Vehicle Name:\", vehicleName);\n    console.log(\"ðŸ”¢ Vehicle Number:\", vehicleNumber);\n    console.log(\"ðŸ“ Notes:\", notes);\n    showToast(\"âœ… Order submitted (local only)\");\n  };\n  const resetCart = () => {\n    localStorage.removeItem(STORAGE_KEYS.CART);\n    setCart([]);\n    setVehicleName(\"\");\n    setVehicleNumber(\"\");\n    setNotes(\"\");\n  };\n  const totalCTN = cart.reduce((sum, item) => sum + item.entries.reduce((eSum, e) => eSum + (e.ctn || 0), 0), 0);\n  return {\n    cart,\n    handleAdd,\n    handleRemove,\n    handleBatchChange,\n    handleAddBatch,\n    handleSubmit,\n    resetCart,\n    totalCTN,\n    vehicleName,\n    setVehicleName,\n    vehicleNumber,\n    setVehicleNumber,\n    notes,\n    setNotes\n  };\n}\n_s(useCart, \"1h6kiNfVtxgw4J9U6aGmtcauAUA=\");","map":{"version":3,"names":["useState","useEffect","STORAGE_KEYS","CART","useCart","showToast","_s","cart","setCart","vehicleName","setVehicleName","vehicleNumber","setVehicleNumber","notes","setNotes","stored","JSON","parse","localStorage","getItem","setItem","stringify","handleAdd","item","existing","find","c","name","newItem","entries","batch","mfg","exp","qty","ctn","prev","handleRemove","itemIndex","batchIndex","newCart","splice","length","handleBatchChange","field","value","includes","parseInt","handleAddBatch","push","handleSubmit","valid","every","e","console","log","resetCart","removeItem","totalCTN","reduce","sum","eSum"],"sources":["C:/Users/Jai Ayurved research/Documents/Projects/Projuect Supervisor/src/hooks/useCartLogic.js"],"sourcesContent":["import { useState, useEffect } from 'react';\n\nconst STORAGE_KEYS = {\n  CART: \"cart_v3\"\n};\n\nexport default function useCart(showToast) {\n  const [cart, setCart] = useState([]);\n  const [vehicleName, setVehicleName] = useState(\"\");\n  const [vehicleNumber, setVehicleNumber] = useState(\"\");\n  const [notes, setNotes] = useState(\"\");\n\n  useEffect(() => {\n    const stored = JSON.parse(localStorage.getItem(STORAGE_KEYS.CART) || \"[]\");\n    setCart(stored);\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(STORAGE_KEYS.CART, JSON.stringify(cart));\n  }, [cart]);\n\nconst handleAdd = (item) => {\n  const existing = cart.find(c => c.name === item.name);\n  if (!existing) {\n    const newItem = {\n      name: item.name,\n      entries: [{ batch: \"\", mfg: \"\", exp: \"\", qty: 0, ctn: 0 }]\n    };\n    setCart(prev => [...prev, newItem]);\n  } else {\n    showToast(\"âš ï¸ Item already added â€” use +Batch to add more\");\n  }\n};\n\n  const handleRemove = (itemIndex, batchIndex = null) => {\n    const newCart = [...cart];\n    if (batchIndex === null) {\n      newCart.splice(itemIndex, 1);\n    } else {\n      newCart[itemIndex].entries.splice(batchIndex, 1);\n      if (newCart[itemIndex].entries.length === 0) {\n        newCart.splice(itemIndex, 1);\n      }\n    }\n    setCart(newCart);\n    showToast(\"âŒ Removed\");\n  };\n\n  const handleBatchChange = (itemIndex, batchIndex, field, value) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries[batchIndex][field] =\n      [\"qty\", \"ctn\"].includes(field) ? parseInt(value) || 0 : value;\n    setCart(newCart);\n  };\n\n  const handleAddBatch = (itemIndex) => {\n    const newCart = [...cart];\n    newCart[itemIndex].entries.push({ batch: \"\", mfg: \"\", exp: \"\", qty: 0, ctn: 0 });\n    setCart(newCart);\n  };\n\n  const handleSubmit = () => {\n    const valid = cart.every(item =>\n      item.entries.every(e => e.batch && (e.qty > 0 || e.ctn > 0))\n    );\n    if (!valid) {\n      showToast(\"âš ï¸ Please fill batch, qty or CTN for all entries\");\n      return;\n    }\n    console.log(\"ðŸ›’ Final Order:\", cart);\n    console.log(\"ðŸšš Vehicle Name:\", vehicleName);\n    console.log(\"ðŸ”¢ Vehicle Number:\", vehicleNumber);\n    console.log(\"ðŸ“ Notes:\", notes);\n    showToast(\"âœ… Order submitted (local only)\");\n  };\n\n  const resetCart = () => {\n    localStorage.removeItem(STORAGE_KEYS.CART);\n    setCart([]);\n    setVehicleName(\"\");\n    setVehicleNumber(\"\");\n    setNotes(\"\");\n  };\n\n  const totalCTN = cart.reduce(\n    (sum, item) =>\n      sum + item.entries.reduce((eSum, e) => eSum + (e.ctn || 0), 0),\n    0\n  );\n\n  return {\n    cart,\n    handleAdd,\n    handleRemove,\n    handleBatchChange,\n    handleAddBatch,\n    handleSubmit,\n    resetCart,\n    totalCTN,\n    vehicleName,\n    setVehicleName,\n    vehicleNumber,\n    setVehicleNumber,\n    notes,\n    setNotes\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}